const e=[{role:"guest",name:"Гість"},{role:"admin",name:"nagibator228"},{role:"user",name:"skuf1488"}];let t="",n=[];async function o(){a(),document.getElementById("posts-container").innerHTML="",n.forEach((e=>{!function(e,t,n){const o=`\n        <div class="post" data-index="${n}">\n            <h2 class="post-title">${e}</h2>\n            <p class="post-content">${t}</p>\n            <div class="post-actions">\n                <button class="post-delete-btn">Видалити</button>\n                <button class="post-edit-btn">Редагувати</button>\n                <button class="post-comment-btn">Коментувати</button>\n            </div>\n            <ul class = 'comments'>\n            </ul>\n        </div>\n    `;document.getElementById("posts-container").insertAdjacentHTML("beforeend",o)}(e.publicationTheme,e.publicationText,e.id)})),async function(){document.querySelectorAll(".post").forEach((e=>{let t="";n.find((t=>t.id==e.getAttribute("data-index"))).comments.forEach((e=>{t+=`<li class = 'comment'>${e}<li>`})),e.querySelector(".comments").innerHTML=t}))}(),document.querySelectorAll(".post").forEach((e=>{e.querySelector(".post-delete-btn").addEventListener("click",(e=>{const t=e.currentTarget.parentNode.parentNode;n=JSON.parse(localStorage.getItem("posts")).filter((e=>e.id!=t.getAttribute("data-index"))),s(),t.remove()})),e.querySelector(".post-edit-btn").addEventListener("click",(e=>{a();const t=e.currentTarget.parentNode.parentNode.getAttribute("data-index");let c=n.find((e=>e.id===t));const i=r(c.publicationTheme,c.publicationText);c&&(c.publicationText=i.publicationText,c.publicationTheme=i.publicationTheme,s(),o())})),e.querySelector(".post-comment-btn").addEventListener("click",(e=>{a();const t=e.currentTarget.parentNode.parentNode,c=prompt("Введите ваш комментарий:");c&&(n.find((e=>e.id===t.getAttribute("data-index"))).comments.push(c),s(),o())}))}))}function c(e){"guest"==e?document.querySelectorAll("button").forEach((e=>{e.setAttribute("disabled","true")})):"admin"==e?document.querySelectorAll("button").forEach((e=>{e.removeAttribute("disabled")})):"user"==e&&(document.querySelectorAll("button").forEach((e=>{e.setAttribute("disabled","true")})),document.querySelectorAll(".post-comment-btn").forEach((e=>{e.removeAttribute("disabled")})))}function r(e="",t=""){const o=prompt("Введите тему публикации:",e),c=prompt("Введите текст публикации:",t);if(null!==o&&null!==c){return{publicationTheme:o,publicationText:c,id:0!=n.length?toString(parseInt(n[n.length-1].id)+1):"0",comments:[]}}}function s(){localStorage.setItem("posts",JSON.stringify(n))}function a(){n=JSON.parse(localStorage.getItem("posts"))}!function(){document.body.insertAdjacentHTML("afterbegin",'\n        <div class="header">\n             <button id="create-theme-btn" class="create-theme-btn">Додати тему</button>\n        </div>\n    '),document.querySelector(".create-theme-btn").addEventListener("click",(()=>{const e=r();a(),e&&(n.push(e),s(),o())}));const i='<select name="example" class="select-user"> '+e.map((e=>`<option value="${e.name}">${e.name} (${e.role})</option>`)).join("")+"</select>";document.querySelector(".header").insertAdjacentHTML("afterbegin",i);const l=document.querySelector(".select-user");document.querySelector(".select-user").addEventListener("change",(n=>{t=e.find((e=>e.name==l.value)),c(t.role)}))}(),o(),c("guest");
//# sourceMappingURL=index.d0658f7a.js.map
